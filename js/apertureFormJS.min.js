/*
Package: apertureFormJS
Version: 1.7.0
Build Date: 02-16-2015 5:52:09PM
*/
"undefined"!=typeof xdomain&&xdomain.slaves({"http://gravity.markettraders.com":"/cors/proxy.html","http://api.markettraders.com":"/cors/proxy.html","https://www.markettraders.com":"/blackhole/gravity/cors/proxy-ssl.html"}),String.prototype.format=function(){for(var a=this,b=0;b<arguments.length;b++){var c=new RegExp("\\{"+b+"\\}","gm");a=a.replace(c,arguments[b])}return a};var dependencies=[];try{angular.module("ui.bootstrap")&&dependencies.push("ui.bootstrap")}catch(Exception){}angular.module("ApertureForm",[]).config(["$httpProvider",function(a){a.defaults.useXDomain=!0}]),angular.module("ApertureForm",dependencies).controller("FormController",["$scope","$http","formConfig","$window","$location","$templateCache","$injector","$rootScope",function(a,b,c,d,e,f,g,h){var i=null;g.has("$modal")&&(i=g.get("$modal")),h.appConfig={submitFormUrl:"http://gravity.markettraders.com/v2/form/submit/1",getFormConfigUrl:"http://gravity.markettraders.com/v2/form/config/{0}",getQuizUrl:"http://gravity.markettraders.com/v2/quizzes/{0}",getQuizResultsUrl:"http://gravity.markettraders.com/v2/quizzes/results/{0}",getWebinarsUrl:"http://api.markettraders.com/webinars/",getWebinarUrl:"http://api.markettraders.com/webinars/{0}",getSfEntityUrl:"http://gravity.markettraders.com/sf/entity/{0}/lookup",createSfTaskUrl:"http://gravity.markettraders.com/sf/entity/{0}/create-task"},a.formSubmitted=!1,a.page={},a.webinarsConfig={},a.request={},a.response={},a.init=function(a){angular.extend(h.appConfig,a)},a.loadWebinars=function(){a.webinarsConfig.credentials=[a.page.webinarsWebinarType],c.getWebinars(a.webinarsConfig).then(function(b){a.webinars=b.data.webinars,a.webinars.length>0&&(a.webinars[0].checked=!0,a.request.webinar={},a.request.webinar.webinarId=a.webinars[0].webinar_id+"-"+a.webinars[0].event_credentials_id,a.request.webinars={},a.request.webinars[a.webinars[0].webinar_id]=!0)})},a.validateUser=function(b){(b&&a.page.nonClientsOnly||!b&&a.page.clientsOnly)&&(d.location.href=a.page.noAccessRedirectUrl),!b||!a.page.webinarsShowClientWebinars||a.page.webinarsWebinarType&&"gtm_options"==a.page.webinarsWebinarType||(a.page.webinarsWebinarType="gtm_client")},a.$on("form-id-loaded",function(){c.getConfig(a.page.formId).then(function(b){if(angular.extend(a.page,b.page),angular.extend(a.request,b.request),angular.extend(a.webinarsConfig,b.request.webinar),i&&a.page.expired&&a.page.redirect){h.redirect=a.page.redirect;var g=i.open({template:f.get("/modals/offerExpiredDefault.html"),backdrop:"static",controller:"FormController"});g.opened.then(function(){setTimeout(function(){d.location.href=a.page.redirect},5e3)})}else{if(c.getParam("jbid")&&(a.request.entity.jbid=c.getParam("jbid")),c.getParam("fname")&&(a.request.entity.firstName=c.getParam("fname")),c.getParam("lname")&&(a.request.entity.lastName=c.getParam("lname")),c.getParam("fullName")&&(a.request.entity.fullName=c.getParam("fullName")),c.getParam("phone")&&(a.request.entity.phoneNum=c.getParam("phone")),c.getParam("email")&&(a.request.entity.email=c.getParam("email")),c.getParam("refsrc")&&(a.request.entity.referralSource=c.getParam("refsrc")),document.referrer&&(a.request.entity.referrer=document.referrer),c.getParam("utm_campaign")&&(a.request.leadSource.leadSource=c.getParam("utm_campaign")),c.getParam("utm_content")&&(a.request.leadSource.leadSourceDetail=c.getParam("utm_content")),c.getParam("ls")&&(a.request.leadSource.leadSource=c.getParam("ls")),c.getParam("ld")&&(a.request.leadSource.leadSourceDetail=c.getParam("ld")),c.getParam("lsd")&&(a.request.leadSource.leadSourceDetail=c.getParam("lsd")),c.getParam("nols")&&(a.request.leadSource.ignoreLeadSource=c.getParam("nols")),c.getParam("offer")&&(a.request.leadSource.offer=c.getParam("offer")),c.getParam("offer_type")&&(a.request.leadSource.offerType=c.getParam("offer_type")),c.getParam("source")&&(a.request.leadSource.source=c.getParam("source")),c.getParam("fid")&&(a.request.entity.fronterId=c.getParam("fid")),c.getParam("affid")&&(a.request.entity.channel=c.getParam("affid")),c.getParam("channel")&&(a.request.entity.channel=c.getParam("channel")),c.getParam("channel_id")&&(a.request.entity.channel_id=c.getParam("channel_id")),c.getParam("refid")&&(a.request.entity.refid=c.getParam("refid")),c.getParam("cid")&&(a.request.entity.cid=c.getParam("cid")),c.getParam("utm_medium")&&c.getParam("utm_term")&&"ppc"==c.getParam("utm_medium")&&(a.request.entity.utm_term=c.getParam("utm_term")),c.getParam("reqid")&&c.getParam("oid")&&(a.request.cake={},a.request.cake.requestId=c.getParam("reqid"),a.request.cake.offerId=c.getParam("oid"),c.getParam("bp")&&(a.request.leadSource.subId=c.getParam("bp")),a.request.gears.push("Cake")),c.getParam("efx")&&(a.request.gears.push("HasOffers"),c.getParam("efx_source")&&(a.request.hasOffers.source=c.getParam("efx_source"))),c.getParam("rfo")){var j=c.getParam("rfo");a.page.requiredFieldsOverride&&"ph"==j&&(a.phoneNumOverride=!0)}c.getParam("opt")&&1==c.getParam("opt")&&(a.page.webinarsWebinarType="gtm_options",a.request.redirect.onSuccess["default"]="http://www.markettraders.com/register-for-options-webinar/thank-you.html?sfid={{sfid}}"),a.request.leadSource.url=e.absUrl(),a.request.entity.url=e.absUrl(),a.request.formId=a.page.formId,c.getParam("sfid")?(a.request.entity.sfid=c.getParam("sfid"),c.getSfEntity(c.getParam("sfid")).then(function(b){b.data.error?a.validateUser(!1):(a.request.entity.firstName=b.data.firstName,a.request.entity.lastName=b.data.lastName,a.request.entity.fullName=b.data.firstName+" "+b.data.lastName,a.request.entity.email=b.data.email,a.request.entity.phoneNum=b.data.phoneNum.replace(/[A-Za-z$\s\(\)-]/g,""),a.page.accountPhoneNumRequired&&"non-client"===b.data.type&&(a.accountPhoneNumRequired=!0),a.validateUser("client"==b.data.type?!0:!1)),a.loadWebinars()})):(a.validateUser(!1),a.loadWebinars()),c.getParam("client_offer")&&c.getParam("type")&&c.getParam("sfid")&&(a.request.promotion.promotionType=c.getParam("type"),a.request.promotion.promotionName=c.getParam("client_offer"),a.request.promotion.setPromotionType=c.getParam("p")?c.getParam("p"):"false",c.createSfTask(c.getParam("sfid"),a.request).then(function(b){a.request.promotion.taskId=b.data.taskId,a.request.gears.push("PromoTaskUpdate")}))}})}),a.redirectOffer=function(){window.location=h.redirect},a.submitClientInfoUpdate=function(){a.formSubmitted=!0,a.formErrors=!1,!(a.webinarRegistration.firstName.$valid&&a.webinarRegistration.lastName.$valid||!a.inputFullName)||!a.webinarRegistration.phoneNum.$valid&&a.inputPhoneNum||!a.$parent.request||a.processing?a.formErrors=!0:(a.processing=!0,a.inputFullName&&(a.$parent.request.entity.firstName=a.webinarRegistration.firstName.$modelValue,a.$parent.request.entity.lastName=a.webinarRegistration.lastName.$modelValue),a.inputPhoneNum&&(a.$parent.request.entity.phoneNum=a.webinarRegistration.phoneNum.$modelValue),b.post("http://gravity.markettraders.com/v2/client-phone/",a.$parent.request).then(function(b){b?d.location.href=a.redirectUrl:a.debug?(console.log(a.redirectUrl),a.processing=!1):d.location.href=a.redirectUrl}))},a.submitForm=function(){a.request.entity.firstName&&(a.request.entity.firstName=a.request.entity.firstName.replace(/&/g,"")),a.request.entity.lastName&&(a.request.entity.lastName=a.request.entity.lastName.replace(/&/g,"")),a.request.entity.fullName&&(a.request.entity.fullName=a.request.entity.fullName.replace(/&/g,"")),a.formSubmitted=!0,a.formErrors=!1,a.webinarRegistration.$valid&&a.request.entity.email&&!a.processing?(a.processing=!0,b.post(h.appConfig.submitFormUrl,a.request).then(function(b){!b.data.error&&b.data.redirectUrl?d.location.href=b.data.redirectUrl:a.processing=!1})):a.formErrors=!0}}]),angular.module("ApertureForm").controller("ThanksController",["$scope","$http","formConfig","$rootScope",function(a,b,c,d){d.appConfig={submitFormUrl:"http://gravity.markettraders.com/v2/form/submit/1",getFormConfigUrl:"http://gravity.markettraders.com/v2/form/config/{0}",getQuizUrl:"http://gravity.markettraders.com/v2/quizzes/{0}",getQuizResultsUrl:"http://gravity.markettraders.com/v2/quizzes/results/{0}",getWebinarsUrl:"http://api.markettraders.com/webinars/",getWebinarUrl:"http://api.markettraders.com/webinars/{0}",getSfEntityUrl:"http://gravity.markettraders.com/sf/entity/{0}/lookup",createSfTaskUrl:"http://gravity.markettraders.com/sf/entity/{0}/create-task"};var e=null;c.getParam("sfid")&&c.getParam("sfid").indexOf("-")>-1&&(e=c.getParam("sfid").split("-")[1]),c.getParam("wid")&&(e=c.getParam("wid")),a.webinar={},a.page={},e&&c.getWebinar(e).then(function(b){angular.extend(a.webinar,b.data)})}]),angular.module("ApertureForm").controller("RedirectController",["$scope","$http","$window","$location","formConfig",function(a,b,c,d,e){a.sfid=e.getParam("sfid"),a.source=e.getParam("source"),a.isOpt=e.getParam("opt"),a.debug=e.getParam("debug"),a.sfid||(a.sfid="none"),a.source||(a.source="undefined"),a.isOpt||(a.isOpt=0),b.get("http://gravity.markettraders.com/v2/webinar/redirects/"+a.sfid+"/"+a.source+"/"+a.isOpt).then(function(b){if(b.data.error||"none"==b.data.redirectUrl)a.hideSpinner=!0,a.showFullFields=!0,a.showRegistrationForm=!0;else{var d=!0;a.hideSpinner=!0,a.redirectUrl=b.data.redirectUrl,a.request||(a.request={}),b.data.entity&&(a.request.entity=b.data.entity),b.data.noSFResult&&(a.showFullFields=!0,a.showRegistrationForm=!0,a.noSFID=!0,d=!1),b.data.showRegistrationForm&&(a.showRegistrationForm=!0,d=!1),b.data.inputPhoneNum&&(a.inputPhoneNum=!0,d=!1),b.data.updateClientInfo&&(a.updateClientInfo=!0,d=!1),b.data.inputFullName&&(a.inputFullName=!0,d=!1),d&&(a.showFoundMessage=!0,a.debug?console.log(a.redirectUrl):c.location.href=a.redirectUrl)}})}]),angular.module("ApertureForm").filter("webinarTimestamp",["dateConverter",function(a){return function(b,c){return a.getLocalTime(b,c)}}]).filter("formatTimestamp",["dateConverter",function(a){return function(b,c){return a.formatTimestamp(b,c)}}]),angular.module("ApertureForm").factory("dateConverter",function(){return{trim:function(a){return a.replace(/^\s+|\s+$/g,"")},strtotime:function(a,b){function c(a,b,c){var d,e=i[b];"undefined"!=typeof e&&(d=e-h.getDay(),0===d?d=7*c:d>0&&"last"===a?d-=7:0>d&&"next"===a&&(d+=7),h.setDate(h.getDate()+d))}function d(a){var b=a.split(" "),d=b[0],e=b[1].substring(0,3),f=/\d+/.test(d),g="ago"===b[2],i=("last"===d?-1:1)*(g?-1:1);if(f&&(i*=parseInt(d,10)),j.hasOwnProperty(e)&&!b[1].match(/^mon(day|\.)?$/i))return h["set"+j[e]](h["get"+j[e]]()+i);if("wee"===e)return h.setDate(h.getDate()+7*i);if("next"===d||"last"===d)c(d,e,i);else if(!f)return!1;return!0}var e,f,g,h,i,j,k,l,m,n;if(!a)return null;if(a=this.trim(a).replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase(),"now"===a)return null===b||isNaN(b)?(new Date).getTime()/1e3|0:0|b;if(!isNaN(e=Date.parse(a)))return e/1e3|0;if("now"===a)return(new Date).getTime()/1e3;if(!isNaN(e=Date.parse(a)))return e/1e3;if(f=a.match(/^(\d{2,4})-(\d{2})-(\d{2})(?:\s(\d{1,2}):(\d{2})(?::\d{2})?)?(?:\.(\d+)?)?$/))return g=f[1]>=0&&f[1]<=69?+f[1]+2e3:f[1],new Date(g,parseInt(f[2],10)-1,f[3],f[4]||0,f[5]||0,f[6]||0,f[7]||0)/1e3;if(h=b?new Date(1e3*b):new Date,i={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},j={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},l="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)",m="([+-]?\\d+\\s"+l+"|(last|next)\\s"+l+")(\\sago)?",f=a.match(new RegExp(m,"gi")),!f)return!1;for(n=0,k=f.length;k>n;n++)if(!d(f[n]))return!1;return h.getTime()/1e3},localdate:function(a,b){var c,d,e=this,f=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],g=/\\?(.?)/gi,h=function(a,b){return d[a]?d[a]():b},i=function(a,b){for(a=String(a);a.length<b;)a="0"+a;return a};return d={d:function(){return i(d.j(),2)},D:function(){return d.l().slice(0,3)},j:function(){return c.getDate()},l:function(){return f[d.w()]+"day"},N:function(){return d.w()||7},S:function(){var a=d.j(),b=a%10;return 3>=b&&1==parseInt(a%100/10,10)&&(b=0),["st","nd","rd"][b-1]||"th"},w:function(){return c.getDay()},z:function(){var a=new Date(d.Y(),d.n()-1,d.j()),b=new Date(d.Y(),0,1);return Math.round((a-b)/864e5)},W:function(){var a=new Date(d.Y(),d.n()-1,d.j()-d.N()+3),b=new Date(a.getFullYear(),0,4);return i(1+Math.round((a-b)/864e5/7),2)},F:function(){return f[6+d.n()]},m:function(){return i(d.n(),2)},M:function(){return d.F().slice(0,3)},n:function(){return c.getMonth()+1},t:function(){return new Date(d.Y(),d.n(),0).getDate()},L:function(){var a=d.Y();return a%4===0&a%100!==0|a%400===0},o:function(){var a=d.n(),b=d.W(),c=d.Y();return c+(12===a&&9>b?1:1===a&&b>9?-1:0)},Y:function(){return c.getFullYear()},y:function(){return d.Y().toString().slice(-2)},a:function(){return c.getHours()>11?"pm":"am"},A:function(){return d.a().toUpperCase()},B:function(){var a=3600*c.getUTCHours(),b=60*c.getUTCMinutes(),d=c.getUTCSeconds();return i(Math.floor((a+b+d+3600)/86.4)%1e3,3)},g:function(){return d.G()%12||12},G:function(){return c.getHours()},h:function(){return i(d.g(),2)},H:function(){return i(d.G(),2)},i:function(){return i(c.getMinutes(),2)},s:function(){return i(c.getSeconds(),2)},u:function(){return i(1e3*c.getMilliseconds(),6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)"},I:function(){var a=new Date(d.Y(),0),b=Date.UTC(d.Y(),0),c=new Date(d.Y(),6),e=Date.UTC(d.Y(),6);return a-b!==c-e?1:0},O:function(){var a=c.getTimezoneOffset(),b=Math.abs(a);return(a>0?"-":"+")+i(100*Math.floor(b/60)+b%60,4)},P:function(){var a=d.O();return a.substr(0,3)+":"+a.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-c.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(g,h)},r:function(){return"D, d M Y H:i:s O".replace(g,h)},U:function(){return c/1e3|0}},this.date=function(a,b){return e=this,c=void 0===b?new Date:new Date(b instanceof Date?b:1e3*b),a.replace(g,h)},this.date(a,b)},calculateTimezoneOffset:function(a){var b=new Date(1e3*a).getTimezoneOffset()/60*-1,c=parseInt(b);b-=parseInt(b),b=b.toFixed(13),b*=60;var d=parseInt(b);return 0>d&&(d=-1*d),0==d&&(d="00"),(10>c&&c>=0||0>c&&c>=-9)&&(c=0>c?"-0"+-1*c:"0"+c),c>=0?"+"+c+":"+d:c+":"+d},getLocalTime:function(a,b){return b&&0!==b.length||(b="l, M. jS, g:i A"),b=this.trim(b.replace("{tz}","").replace("e","")),this.localdate(b,a)+" GMT"+this.calculateTimezoneOffset(a)},formatTimestamp:function(a,b){var c=!1;b&&0!==b.length||(b="l, M. jS, g:i A e"),(-1!=b.indexOf("e")||-1!=b.indexOf("{tz}")||-1!=b.indexOf("O")||-1!=b.indexOf("T"))&&(c=!0),b=this.trim(b.replace("{tz}","").replace("e","").replace("O","").replace("T",""));var d="";return 1==c&&(d=" GMT"+this.calculateTimezoneOffset(a)),this.localdate(b,a)+d}}}),angular.module("ApertureForm").factory("formConfig",["$http","$q","$rootScope",function(a,b,c){return{getConfig:function(d){var e,f,g=b.defer();return e&&g.resolve(e),f="0"!==d?c.appConfig.getFormConfigUrl.format(d):"config.json",a.get(f).then(function(a){e=a.data,g.resolve(a.data)}),g.promise},getQuiz:function(d){var e,f=b.defer();return e=c.appConfig.getQuizUrl.format(d),a.get(e).then(function(a){f.resolve(a.data)}),f.promise},getQuizResults:function(b){var d=c.appConfig.getQuizResultsUrl.format(b);return a.post(d,b)},getParam:function(a){var b=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),c=new RegExp("[\\?&]"+b+"=([^&#]*)"),d=c.exec(location.search);return null==d?"":decodeURIComponent(d[1].replace(/\+/g," "))},getWebinars:function(b){var d=c.appConfig.getWebinarsUrl;return a.post(d,b)},getSfEntity:function(b){var d=c.appConfig.getSfEntityUrl.format(b);return a.get(d)},createSfTask:function(b,d){var e=c.appConfig.createSfTaskUrl.format(b);return a.post(e,d)},getWebinar:function(b){var d=c.appConfig.getWebinarUrl.format(b);return a.get(d)}}}]),angular.module("ApertureForm").run(["$templateCache",function(a){var b='<div class="firstNameField apertureField" data-ng-class="{\'has-error\': (formSubmitted && webinarRegistration.$error && !request.entity.firstName) || (webinarRegistration.firstName.$dirtied && !request.entity.firstName), \'has-success\': (formSubmitted && !webinarRegistration.$error && request.entity.firstName) || (webinarRegistration.firstName.$dirtied && request.entity.firstName)}"><label for="firstName"></label><input type="text" class="form-control" id="firstName" name="firstName" data-dirtied data-ng-model="request.entity.firstName" maxlength="40" required><span class="help-block" ng-show="(formSubmitted && webinarRegistration.$error && !request.entity.firstName) || (webinarRegistration.firstName.$dirtied && !request.entity.firstName)">This field is required</span></div>';a.put("/fields/firstName.html",b);var c='<div class="lastNameField apertureField" data-ng-class="{\'has-error\': (formSubmitted && webinarRegistration.$error && !request.entity.lastName) || (webinarRegistration.lastName.$dirtied && !request.entity.lastName), \'has-success\': (formSubmitted && !webinarRegistration.$error && request.entity.lastName) || (webinarRegistration.lastName.$dirtied && request.entity.lastName)}"><label for="lastName"></label><input type="text" class="form-control" id="lastName" name="lastName" data-dirtied data-ng-model="request.entity.lastName" maxlength="80" required><span class="help-block" ng-show="(formSubmitted && webinarRegistration.$error && !request.entity.lastName) || (webinarRegistration.lastName.$dirtied && !request.entity.lastName)">This field is required</span></div>';a.put("/fields/lastName.html",c);var d='<div class="fullNameField apertureField" data-ng-class="{\'has-error\': (formSubmitted && webinarRegistration.$error && !request.entity.fullName) || (webinarRegistration.fullName.$dirtied && !request.entity.fullName), \'has-success\': (formSubmitted && !webinarRegistration.$error && request.entity.fullName) || (webinarRegistration.fullName.$dirtied && request.entity.fullName)}"><label for="fullName"></label><input type="text" class="form-control" id="fullName" name="fullName" data-dirtied data-ng-model="request.entity.fullName" required><span class="help-block" ng-show="(formSubmitted && webinarRegistration.$error && !request.entity.fullName) || (webinarRegistration.fullName.$dirtied && !request.entity.fullName)">This field is required</span></div>';a.put("/fields/fullName.html",d);var e='<div class="emailAddressField apertureField" data-ng-class="{\'has-error\': (formSubmitted && webinarRegistration.$error && (!request.entity.email || webinarRegistration.emailAddress.$invalid)) || (webinarRegistration.emailAddress.$dirtied && (webinarRegistration.emailAddress.$invalid || !request.entity.email)), \'has-success\': (formSubmitted && webinarRegistration.$error && request.entity.email && !webinarRegistration.emailAddress.$invalid) || (webinarRegistration.emailAddress.$dirtied && !webinarRegistration.emailAddress.$invalid && request.entity.email)}"><label for="emailAddress"></label><input type="email" class="form-control" id="emailAddress" name="emailAddress" data-dirtied data-ng-model="request.entity.email"><span class="help-block" ng-show="(formSubmitted && webinarRegistration.$error && webinarRegistration.emailAddress.$invalid) || (webinarRegistration.emailAddress.$dirtied && webinarRegistration.emailAddress.$invalid)">Please enter a valid email address</span><span class="help-block" ng-show="(formSubmitted && webinarRegistration.$error && !request.entity.email && !webinarRegistration.emailAddress.$invalid) || (webinarRegistration.emailAddress.$dirtied && !request.entity.email && !webinarRegistration.emailAddress.$invalid)">This field is required</span></div>';a.put("/fields/emailAddress.html",e);var f='<div class="countryField apertureField"><label for="country"></label><select id="country" name="country" data-dirtied class="form-control bfh-countries" data-ng-model="request.entity.country" data-country="US"></select></div>';a.put("/fields/country.html",f);var g='<div class="phoneNumField apertureField" data-ng-class="{\'has-error\': (formSubmitted && webinarRegistration.$error && (webinarRegistration.phoneNum.$error.minlength || !request.entity.phoneNum)) || (webinarRegistration.phoneNum.$dirtied && (webinarRegistration.phoneNum.$error.minlength || !request.entity.phoneNum)), \'has-success\': (formSubmitted && !webinarRegistration.$error && !webinarRegistration.phoneNum.$error.minlength && request.entity.phoneNum) || (webinarRegistration.phoneNum.$dirtied && !webinarRegistration.phoneNum.$error.minlength && request.entity.phoneNum)}"><label for="phoneNum"></label><input type="text" class="form-control" id="phoneNum" name="phoneNum" data-dirtied data-country="country" data-ng-pattern="/^((\\(|\\)|\\+|\\-|\\s)|\\d){9,20}$/" required data-ng-model="request.entity.phoneNum"><span class="help-block" data-ng-show="(formSubmitted && webinarRegistration.$error && !request.entity.phoneNum && !webinarRegistration.phoneNum.$error.pattern) || (webinarRegistration.phoneNum.$dirtied && !request.entity.phoneNum && !webinarRegistration.phoneNum.$error.pattern)">This field is required</span><span class="help-block" data-ng-show="(formSubmitted && webinarRegistration.$error && webinarRegistration.phoneNum.$error.pattern) || (webinarRegistration.phoneNum.$dirtied && webinarRegistration.phoneNum.$error.pattern)">Phone number must be at least 9 digits</span></div>';a.put("/fields/phoneNum.html",g);var h='<div class="mobilePhoneField apertureField" data-ng-class="{\'has-error\': (formSubmitted && webinarRegistration.$error && (webinarRegistration.mobilePhone.$error.minlength || !request.entity.mobilePhone)) || (webinarRegistration.mobilePhone.$dirtied && (webinarRegistration.mobilePhone.$error.minlength || !request.entity.mobilePhone)), \'has-success\': (formSubmitted && !webinarRegistration.$error && !webinarRegistration.mobilePhone.$error.minlength && request.entity.mobilePhone) || (webinarRegistration.mobilePhone.$dirtied && !webinarRegistration.mobilePhone.$error.minlength && request.entity.mobilePhone)}"><label for="mobilePhone"></label><input type="text" class="form-control" id="mobilePhone" name="mobilePhone" data-dirtied data-country="country" data-ng-pattern="/^((\\(|\\)|\\+|\\-|\\s)|\\d){9,20}$/" required data-ng-model="request.entity.mobilePhone"><span class="help-block" data-ng-show="(formSubmitted && webinarRegistration.$error && !request.entity.mobilePhone && !webinarRegistration.mobilePhone.$error.pattern) || (webinarRegistration.mobilePhone.$dirtied && !request.entity.mobilePhone && !webinarRegistration.mobilePhone.$error.pattern)">This field is required</span><span class="help-block" data-ng-show="(formSubmitted && webinarRegistration.$error && webinarRegistration.mobilePhone.$error.pattern) || (webinarRegistration.mobilePhone.$dirtied && webinarRegistration.mobilePhone.$error.pattern)">Phone number must be at least 9 digits</span></div>';a.put("/fields/mobilePhone.html",h);var i='<div class="addressField apertureField"><div class="form-group"><label for="address"></label><input type="text" class="form-control" id="address" name="address" data-dirtied data-ng-model="request.entity.address1"></div><div class="form-group"><input type="text" class="form-control" id="address2" name="address2" data-dirtied data-ng-model="request.entity.address2"></div></div>';a.put("/fields/address.html",i);var j='<div class="cityField apertureField"><label for="city"></label><input type="text" class="form-control" id="city" name="city" data-dirtied data-ng-model="request.entity.city"></div>';a.put("/fields/city.html",j);var k='<div class="stateField apertureField"><label for="state"></label><select id="state" name="states" data-dirtied class="form-control bfh-states" data-ng-model="request.entity.state" data-country="country"></select></div>';a.put("/fields/state.html",k);var l='<div class="zipCodeField apertureField"><label for="zipCode"></label><input type="text" class="form-control" id="zipCode" name="zipCode" data-dirtied data-ng-model="request.entity.zipCode"></div>';a.put("/fields/zipCode.html",l);var m='<div class="refidField apertureField"><label for="refid"></label><input type="hidden" class="form-control" id="refid" name="refid" data-dirtied data-ng-model="request.entity.refid"></div>';a.put("/fields/refid.html",m);var n='<div class="cidField apertureField"><label for="cid"></label><input type="hidden" class="form-control" id="cid" name="cid" data-dirtied data-ng-model="request.entity.cid"></div>';a.put("/fields/cid.html",n);var o='<div class="submitField apertureField"><button id="submitBtn" class="btn" data-ng-click="submit()">{{label}}</button></div>';a.put("/fields/submitBtn.html",o);var p='<div class="formErrors apertureField" data-ng-show="formErrors"><div data-ng-transclude></div></div>';a.put("/fields/formErrors.html",p);var q='<div class="smsOptInField apertureField checkbox"><input type="checkbox" name="smsOptIn" id="smsOptIn" value="" data-dirtied data-ng-model="request.entity.smsOptIn"><label for="smsOptIn"></label></div>';a.put("/fields/smsOptIn.html",q)}]),angular.module("ApertureForm").run(["$templateCache",function(a){var b='<div class="modal-header"><h3 class="modal-title">We\'re sorry, but this offer is no longer available!</h3></div><div class="modal-body">You will be redirected to the latest offers available through MTI in the next 5 seconds. If you are not redirected within 5 seconds or would like to be redirected sooner please click the "Go Now" button below.</div><div class="modal-footer"><button class="btn btn-primary" data-ng-click="redirectOffer()">Go Now</button></div>';a.put("/modals/offerExpiredDefault.html",b)}]),angular.module("ApertureForm").run(["$templateCache",function(a){var b='<div class="quiz-container"><label class="question" data-ng-repeat="question in page.quiz.questions"><span class="question-header">{{ question.id }}. {{ question.text }}</span><label class="question-answer" data-ng-repeat="(id, answer) in question.answers"><input class="question-input" data-ng-model="request.quiz.answers[question.id]" type="{{ question.type }}" name="{{ question.id }}" value="{{ id }}"><span class="question-value">{{ answer }}</span></label></label></div>';a.put("/quizzes/questions-default.html",b);var c='<div class="answer-container"><span class="quiz-score">Your score is {{ page.quiz.score }}</span><span class="quiz-profile">You are a {{ page.quiz.profile_name }}</span><span class="quiz-description">{{ page.quiz.profile_description }}</span></div>';a.put("/quizzes/answers-default.html",c)}]),angular.module("ApertureForm").run(["$templateCache",function(a){var b='<span class="webinarTime" data-ng-model="scope.webinar">{{ webinar.start_time | webinarTimestamp:"g:i A" }}</span>';a.put("/thanks/webinarTime.html",b);var c='<span class="webinarDate" data-ng-model="scope.webinar">{{ webinar.start_time | formatTimestamp:"l, M. jS" }}</span>';a.put("/thanks/webinarDate.html",c);var d='<span class="webinarDateTime" data-ng-model="scope.webinar">{{ webinar.start_time | webinarTimestamp:"l, M. jS, g:i A" }}</span>';a.put("/thanks/webinarDateTime.html",d);var e='<span class="webinarName" data-ng-model="scope.webinar">{{ webinar.name }}</span>';a.put("/thanks/webinarName.html",e)}]),angular.module("ApertureForm").run(["$templateCache",function(a){var b='<div class="firstNameField apertureField" data-ng-class="{\'has-error\': (formSubmitted && webinarRegistration.$error && !request.entity.firstName) || (webinarRegistration.firstName.$dirtied && !request.entity.firstName) || (webinarRegistration.firstName.$error.validateName), \'has-success\': (formSubmitted && !webinarRegistration.$error && request.entity.firstName) || (webinarRegistration.firstName.$dirtied && request.entity.firstName) || (webinarRegistration.firstName.$dirtied && !webinarRegistration.firstName.$error.validateName)}"><label for="firstName"></label><input type="text" class="form-control" id="firstName" name="firstName" data-validate-name data-dirtied data-ng-model="request.entity.firstName" maxlength="40" required><span class="help-block" ng-show="(formSubmitted && webinarRegistration.$error && !request.entity.firstName && !webinarRegistration.firstName.$error.validateName) || (webinarRegistration.firstName.$dirtied && !request.entity.firstName && !webinarRegistration.firstName.$error.validateName)">This field is required</span><span class="help-block" ng-show="(formSubmitted && webinarRegistration.firstName.$error && webinarRegistration.firstName.$error.validateName) || (webinarRegistration.firstName.$dirtied && webinarRegistration.firstName.$error.validateName)">You must enter a valid first name</span></div>';a.put("/fields/webinarRedirectFirstName.html",b);var c='<div class="lastNameField apertureField" data-ng-class="{\'has-error\': (formSubmitted && webinarRegistration.$error && !request.entity.lastName) || (webinarRegistration.lastName.$dirtied && !request.entity.lastName) || (webinarRegistration.lastName.$error.validateName), \'has-success\': (formSubmitted && !webinarRegistration.$error && request.entity.lastName) || (webinarRegistration.lastName.$dirtied && request.entity.lastName) || (webinarRegistration.lastName.$dirtied && !webinarRegistration.lastName.$error.validateName)}"><label for="lastName"></label><input type="text" class="form-control" id="lastName" name="lastName" data-validate-name data-dirtied data-ng-model="request.entity.lastName" maxlength="80" required><span class="help-block" ng-show="(formSubmitted && webinarRegistration.$error && !request.entity.lastName && !webinarRegistration.lastName.$error.validateName) || (webinarRegistration.lastName.$dirtied && !request.entity.lastName && !webinarRegistration.lastName.$error.validateName)">This field is required</span><span class="help-block" ng-show="(formSubmitted && webinarRegistration.lastName.$error && webinarRegistration.lastName.$error.validateName) || (webinarRegistration.lastName.$dirtied && webinarRegistration.lastName.$error.validateName)">You must enter a valid last name</span></div>';a.put("/fields/webinarRedirectLastName.html",c);var d='<div class="fullNameField apertureField" data-ng-class="{\'has-error\': (formSubmitted && webinarRegistration.$error && !request.entity.fullName) || (webinarRegistration.fullName.$dirtied && !request.entity.fullName) || (webinarRegistration.fullName.$error.validateName), \'has-success\': (formSubmitted && !webinarRegistration.$error && request.entity.fullName) || (webinarRegistration.fullName.$dirtied && request.entity.fullName) || (webinarRegistration.fullName.$dirtied && !webinarRegistration.fullName.$error.validateName)}"><label for="fullName"></label><input type="text" class="form-control" id="fullName" name="fullName" data-validate-name data-dirtied data-ng-model="request.entity.fullName" required><span class="help-block" ng-show="(formSubmitted && webinarRegistration.$error && !request.entity.fullName && !webinarRegistration.fullName.$error.validateName) || (webinarRegistration.fullName.$dirtied && !request.entity.fullName && !webinarRegistration.fullName.$error.validateName)">This field is required</span><span class="help-block" ng-show="(formSubmitted && webinarRegistration.fullName.$error && webinarRegistration.fullName.$error.validateName) || (webinarRegistration.fullName.$dirtied && webinarRegistration.fullName.$error.validateName)">You must enter a valid  first and last name</span></div>';a.put("/fields/webinarRedirectFullName.html",d);var e='<div class="phoneNumField apertureField" data-ng-class="{\'has-error\': (formSubmitted && webinarRegistration.$error && (webinarRegistration.phoneNum.$error.minlength || !request.entity.phoneNum)) || (webinarRegistration.phoneNum.$dirtied && (webinarRegistration.phoneNum.$error.minlength || !request.entity.phoneNum)), \'has-success\': (formSubmitted && !webinarRegistration.$error && !webinarRegistration.phoneNum.$error.minlength && request.entity.phoneNum) || (webinarRegistration.phoneNum.$dirtied && !webinarRegistration.phoneNum.$error.minlength && request.entity.phoneNum)}"><label for="phoneNum"></label><input type="text" class="form-control" id="phoneNum" name="phoneNum" data-dirtied data-country="country" data-ng-pattern="/^((\\(|\\)|\\+|\\-|\\s)|\\d){9,20}$/" required data-ng-model="request.entity.phoneNum"><span class="help-block" data-ng-show="(formSubmitted && webinarRegistration.$error && !request.entity.phoneNum && !webinarRegistration.phoneNum.$error.pattern) || (webinarRegistration.phoneNum.$dirtied && !request.entity.phoneNum && !webinarRegistration.phoneNum.$error.pattern)">This field is required</span><span class="help-block" data-ng-show="(formSubmitted && webinarRegistration.$error && webinarRegistration.phoneNum.$error.pattern) || (webinarRegistration.phoneNum.$dirtied && webinarRegistration.phoneNum.$error.pattern)">Phone number must be at least 9 digits</span></div>';
a.put("/fields/webinarRedirectPhoneNum.html",e)}]),angular.module("ApertureForm").run(["$templateCache",function(a){var b='<div class="webinar-registrations"><label class="checkbox" data-ng-repeat="webinar in webinars"><input type="checkbox" name="webinars[]" class="webinar-checkbox" data-ng-model="request.webinars[webinar.webinar_id]" data-ng-checked="{{webinar.checked}}">{{ webinar.start_time | webinarTimestamp:$parent.$parent.page.webinarsTimestampFormat }}</label></div>';a.put("/fields/webinar-checkboxes.html",b);var c='<div class="webinar-registrations"><label class="checkbox" data-ng-repeat="webinar in webinars"><input type="checkbox" name="webinars[]" class="webinar-checkbox" value="{{webinar.webinar_id}}-{{webinar.event_credentials_id}}" data-ng-model="request.webinars[webinar.webinar_id]" data-ng-checked="{{webinar.checked}}"><span class="webinar-date">{{ webinar.start_time | webinarTimestamp:$parent.$parent.page.webinarsTimestampFormat }}</span><span class="webinar-info">{{ webinar.name }}</span></label></div>';a.put("/fields/webinar-checkboxes-titles.html",c);var d='<div class="webinar-registrations"><label class="radio" data-ng-repeat="webinar in webinars"><input type="radio" name="webinars" class="webinar-radio" value="{{webinar.webinar_id}}-{{webinar.event_credentials_id}}" data-ng-model="request.webinar.webinarId" data-ng-checked="{{webinar.checked}}">{{ webinar.start_time | webinarTimestamp:$parent.$parent.page.webinarsTimestampFormat }}</label><label class="radio" data-ng-if="page.webinarsCannotAttend"><input type="radio" name="webinars" class="webinar-radio" value="0-0" data-ng-model="request.webinar.webinarId">I cannot attend these dates. Please have someone contact me for future demonstration dates.</label><label class="radio" data-ng-if="page.webinarsOnDemand"><input type="radio" name="webinars" class="webinar-radio" value="{{page.webinarsOnDemand}}-0" data-ng-model="request.webinar.webinarId">I can\'t attend a live webinar at any of those times.  Log me in to watch an on-demand version of the webinar right now.</label><label class="radio" data-ng-if="page.doNotRegister"><input type="radio" name="webinars" class="webinar-radio" value="555-555" data-ng-model="request.webinar.webinarId">{{page.doNotRegister}}</label></div>';a.put("/fields/webinar-radios.html",d);var e='<div class="webinar-registrations"><label class="radio" data-ng-repeat="webinar in webinars"><input type="radio" name="webinars" class="webinar-radio" value="{{webinar.webinar_id}}-{{webinar.event_credentials_id}}" data-ng-model="request.webinar.webinarId" data-ng-checked="{{webinar.checked}}"><span class="webinar-date">{{ webinar.start_time | webinarTimestamp:$parent.$parent.page.webinarsTimestampFormat }}</span>&nbsp;<span class="webinar-info">{{ webinar.name }}</span></label><label class="radio" data-ng-if="page.webinarsCannotAttend"><input type="radio" name="webinars" class="webinar-radio" value="0-0" data-ng-model="request.webinar.webinarId">I cannot attend these dates. Please have someone contact me for future demonstration dates.</label><label class="radio" data-ng-if="page.webinarsOnDemand"><input type="radio" name="webinars" class="webinar-radio" value="{{page.webinarsOnDemand}}-0" data-ng-model="request.webinar.webinarId">I can\'t attend a live webinar at any of those times.  Log me in to watch an on-demand version of the webinar right now.</label></div>';a.put("/fields/webinar-radios-titles.html",e);var f='<div class="webinar-registrations"><label class="checkbox" data-ng-repeat="webinar in webinars"><input type="checkbox" name="webinars[]" class="webinar-checkbox" data-ng-model="request.webinars[webinar.webinar_id]" data-ng-checked="{{webinar.checked}}" /><span mti-inject /></label></div>';a.put("/fields/webinar-checkboxes-custom.html",f);var g='<div class="webinar-registrations"><label class="radio" data-ng-repeat="webinar in webinars"><input type="radio" name="webinars" class="webinar-radio" value="{{webinar.webinar_id}}-{{webinar.event_credentials_id}}" data-ng-model="request.webinar.webinarId" data-ng-checked="{{webinar.checked}}" /><span mti-inject /></label><label class="radio" data-ng-if="page.webinarsCannotAttend"><input type="radio" name="webinars" class="webinar-radio" value="0-0" data-ng-model="request.webinar.webinarId">I cannot attend these dates. Please have someone contact me for future demonstration dates.</label><label class="radio" data-ng-if="page.webinarsOnDemand"><input type="radio" name="webinars" class="webinar-radio" value="{{page.webinarsOnDemand}}-0" data-ng-model="request.webinar.webinarId">I can\'t attend a live webinar at any of those times.  Log me in to watch an on-demand version of the webinar right now.</label></div>';a.put("/fields/webinar-radios-custom.html",g)}]),angular.module("ApertureForm").directive("formId",function(){var a={scope:!1,link:function(a,b,c){a.page={},"formId"in c&&(a.page.formId=c.formId,a.$broadcast("form-id-loaded"))}};return a}).directive("field",["$templateCache",function(a){var b=["firstName","lastName","fullName","webinarRedirectPhoneNum","webinarRedirectFirstName","webinarRedirectFullName","webinarRedirectLastName","emailAddress","country","phoneNum","mobilePhone","address","city","state","zipCode","smsOptIn","cid","refid"],c={restrict:"EA",replace:!0,scope:!1,template:function(c,d){if("field"in d&&d.field){if(-1!==$.inArray(d.field,b))return a.get("/fields/"+d.field+".html")}else d.field="undefined";console.log('Field type "'+d.field+'" does not exist.')},link:function(a,b,c){b.addClass("form-group"),"label"in c?b.find("label").html(c.label):b.find("label").remove(),"placeholder"in c&&b.find("input").first().attr("placeholder",c.placeholder)}};return c}]).directive("submit",["$templateCache",function(a){return{restrict:"EA",replace:!0,scope:{label:"@",submit:"&"},template:a.get("/fields/submitBtn.html"),link:function(a,b){b.addClass("form-group")}}}]).directive("questions",["$templateCache","formConfig",function(a,b){var c=["questions-default"],d={restrict:"EA",replace:!0,scope:!1,template:function(b,d){if("questions"in d&&d.questions){if(-1!==$.inArray(d.questions,c))return a.get("/quizzes/"+d.questions+".html")}else d.questions="undefined"},link:function(a,c,d){"quizId"in d&&(a.page.quiz={},a.request.quiz={},a.request.quiz.answers={},a.request.quiz.quizId=d.quizId,b.getQuiz(d.quizId).then(function(b){a.page.quiz.questions=b.questions}))}};return d}]).directive("answers",["$templateCache","formConfig",function(a,b){var c=["answers-default"],d={restrict:"EA",replace:!0,scope:!1,template:function(b,d){if("answers"in d&&d.answers){if(-1!==$.inArray(d.answers,c))return a.get("/quizzes/"+d.answers+".html")}else d.answers="undefined"},link:function(a){b.getParam("qrid")&&b.getQuizResults(b.getParam("qrid")).then(function(c){a.page.quiz={},a.page.quiz.score=b.getParam("qrs"),a.page.quiz.profile_name=c.data.profile_name,a.page.quiz.profile_description=c.data.profile_description})}};return d}]).directive("mtiInject",function(){return{restrict:"A",link:function(a,b,c,d,e){if(!e)throw minErr("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag(b));var f=a.$new();e(f,function(a){b.empty(),b.replaceWith(a),b.on("$destroy",function(){f.$destroy()})})}}}).directive("webinars",["$templateCache","formConfig",function(a){var b=["webinar-radios","webinar-radios-titles","webinar-checkboxes","webinar-checkboxes-titles"],c={restrict:"EA",replace:!0,scope:!1,template:function(c,d){if("webinars"in d&&d.webinars){if(-1!==$.inArray(d.webinars,b))return a.get("/fields/"+d.webinars+".html")}else d.webinars="undefined";console.log('Webinar type "'+d.webinars+'" does not exist.')},link:function(a,b,c){var d=c.display?c.display:3,e=(c.offset?c.offset:0,"true"===c.weekLimit),f=c.webinarType?c.webinarType:"gtm_nonclient",g=c.timestampFormat?c.timestampFormat:"l, M. jS, g:i A",h="false"!==c.onDemand?c.onDemand:!1,i="true"===c.cannotAttend,j="false"!==c.doNoteRegister?c.doNotRegister:!1,k="true"===c.showClientWebinars;e&&(a.page.webinarsLimitToWeek=!0),h&&(a.page.webinarsOnDemand=h),i&&(a.page.webinarsCannotAttend=!0),j&&(a.page.doNotRegister=j),g&&(a.page.webinarsTimestampFormat=g),k&&(a.page.webinarsShowClientWebinars=k),!a.page.webinarsWebinarType&&f&&(a.page.webinarsWebinarType=f),a.webinarsConfig.limit=d,a.webinarsConfig.end_of_week=e}};return c}]).directive("webinarsCustom",["$templateCache","formConfig",function(a){var b=["webinar-radios","webinar-checkboxes"];return{restrict:"EA",scope:!1,replace:!1,transclude:!0,template:function(c,d){if("webinarsCustom"in d&&d.webinarsCustom){if(-1!==$.inArray(d.webinarsCustom,b))return a.get("/fields/"+d.webinarsCustom+"-custom.html")}else d.webinarsCustom="undefined";console.log('Webinar type "'+d.webinars+'" does not exist.')},link:function(a,b,c){var d=c.display?c.display:3,e=(c.offset?c.offset:0,"true"===c.weekLimit),f=c.webinarType?c.webinarType:"gtm_nonclient",g=c.timestampFormat?c.timestampFormat:"l, M. jS, g:i A",h="false"!==c.onDemand?c.onDemand:!1,i="true"===c.cannotAttend,j="false"!==c.doNoteRegister?c.doNotRegister:!1,k="true"===c.showClientWebinars;e&&(a.page.webinarsLimitToWeek=!0),h&&(a.page.webinarsOnDemand=h),i&&(a.page.webinarsCannotAttend=!0),j&&(a.page.doNotRegister=j),g&&(a.page.webinarsTimestampFormat=g),k&&(a.page.webinarsShowClientWebinars=k),!a.page.webinarsWebinarType&&f&&(a.page.webinarsWebinarType=f),a.webinarsConfig.limit=d,a.webinarsConfig.end_of_week=e}}}]).directive("formErrors",["$templateCache",function(a){return{restrict:"EA",replace:!0,transclude:!0,template:a.get("/fields/formErrors.html")}}]).directive("validateName",[function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=function(a){if(a){var b=a.split(" ");d.$setValidity("validateName",!0);for(var c=0;c<b.length;c++)if(b[c]&&"NA"==b[c].toUpperCase().trim()){d.$setValidity("validateName",!1);break}}return a};d.$parsers.unshift(e),d.$formatters.push(e),c.$observe(d,function(){return e(d.$viewValue)})}}}]).directive("dirtied",[function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$dirtied=!1,b.on("blur",function(){b.addClass("ng-dirtied"),a.$apply(function(){d.$dirtied=!0})})}}}]);